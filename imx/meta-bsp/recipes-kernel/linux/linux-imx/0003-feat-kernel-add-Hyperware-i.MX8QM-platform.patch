From 95a916f07e607276d6c1196d47b5999a3066036d Mon Sep 17 00:00:00 2001
From: Clive Lau <liuxusheng@auto-link.com.cn>
Date: Mon, 29 Apr 2019 16:33:25 +0800
Subject: [PATCH 3/3] feat(kernel): add Hyperware i.MX8QM platform

---
 arch/arm64/boot/dts/freescale/Makefile        |    1 +
 .../boot/dts/freescale/fsl-imx8qm-device.dtsi |   36 +-
 .../dts/freescale/fsl-imx8qm-hyperware.dts    |   17 +
 .../dts/freescale/fsl-imx8qm-hyperware.dtsi   | 1163 +++++++++++++++++
 4 files changed, 1213 insertions(+), 4 deletions(-)
 create mode 100644 arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dts
 create mode 100644 arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dtsi

diff --git a/arch/arm64/boot/dts/freescale/Makefile b/arch/arm64/boot/dts/freescale/Makefile
index 07277bc8fda6..c8c361c1de07 100644
--- a/arch/arm64/boot/dts/freescale/Makefile
+++ b/arch/arm64/boot/dts/freescale/Makefile
@@ -21,6 +21,7 @@ dtb-$(CONFIG_ARCH_FSL_IMX8QM) += fsl-imx8qm-lpddr4-arm2.dtb \
 				 fsl-imx8qm-ddr4-arm2-hdmi.dtb \
 				 fsl-imx8qm-lpddr4-arm2_ca53.dtb \
 				 fsl-imx8qm-lpddr4-arm2_ca72.dtb \
+				 fsl-imx8qm-hyperware.dtb \
 				 fsl-imx8qm-mek.dtb \
 				 fsl-imx8qm-mek-rpmsg.dtb \
 				 fsl-imx8qm-mek-dsp.dtb \
diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-device.dtsi b/arch/arm64/boot/dts/freescale/fsl-imx8qm-device.dtsi
index 8fc95161d511..2c3ce9b3143f 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8qm-device.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-device.dtsi
@@ -2914,9 +2914,9 @@
 		status = "disabled";
 	};
 
-	i2c1_lvds0: i2c@56247000 {
+	i2c0_lvds0: i2c@56246000 {
 		compatible = "fsl,imx8qm-lpi2c";
-		reg = <0x0 0x56247000 0x0 0x1000>;
+		reg = <0x0 0x56246000 0x0 0x1000>;
 		interrupts = <9 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&irqsteer_lvds0>;
 		clocks = <&clk IMX8QM_LVDS0_I2C0_CLK>,
@@ -2928,6 +2928,20 @@
 		status = "disabled";
 	};
 
+	i2c1_lvds0: i2c@56247000 {
+		compatible = "fsl,imx8qm-lpi2c";
+		reg = <0x0 0x56247000 0x0 0x1000>;
+		interrupts = <9 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&irqsteer_lvds0>;
+		clocks = <&clk IMX8QM_LVDS0_I2C1_CLK>,
+			 <&clk IMX8QM_LVDS0_I2C1_IPG_CLK>;
+		clock-names = "per", "ipg";
+		assigned-clocks = <&clk IMX8QM_LVDS0_I2C1_CLK>;
+		assigned-clock-rates = <24000000>;
+		power-domains = <&pd_lvds0_i2c0>;
+		status = "disabled";
+	};
+
 	irqsteer_lvds1: irqsteer@572400000 {
 		compatible = "nxp,imx-irqsteer";
 		reg = <0x0 0x57240000 0x0 0x1000>;
@@ -2940,9 +2954,9 @@
 		power-domains = <&pd_lvds1>;
 	};
 
-	i2c1_lvds1: i2c@57247000 {
+	i2c0_lvds1: i2c@57246000 {
 		compatible = "fsl,imx8qm-lpi2c";
-		reg = <0x0 0x57247000 0x0 0x1000>;
+		reg = <0x0 0x57246000 0x0 0x1000>;
 		interrupts = <9 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&irqsteer_lvds1>;
 		clocks = <&clk IMX8QM_LVDS1_I2C0_CLK>,
@@ -2954,6 +2968,20 @@
 		status = "disabled";
 	};
 
+	i2c1_lvds1: i2c@57247000 {
+		compatible = "fsl,imx8qm-lpi2c";
+		reg = <0x0 0x57247000 0x0 0x1000>;
+		interrupts = <9 IRQ_TYPE_LEVEL_HIGH>;
+		interrupt-parent = <&irqsteer_lvds1>;
+		clocks = <&clk IMX8QM_LVDS1_I2C1_CLK>,
+			 <&clk IMX8QM_LVDS1_I2C1_IPG_CLK>;
+		clock-names = "per", "ipg";
+		assigned-clocks = <&clk IMX8QM_LVDS1_I2C1_CLK>;
+		assigned-clock-rates = <24000000>;
+		power-domains = <&pd_lvds1_i2c0>;
+		status = "disabled";
+	};
+
 	irqsteer_csi0: irqsteer@58220000 {
 		compatible = "nxp,imx-irqsteer";
 		reg = <0x0 0x58220000 0x0 0x1000>;
diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dts b/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dts
new file mode 100644
index 000000000000..9fc5a13c72fc
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dts
@@ -0,0 +1,17 @@
+/*
+ * Copyright 2017-2018 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+/dts-v1/;
+
+#include "fsl-imx8qm-hyperware.dtsi"
diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dtsi b/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dtsi
new file mode 100644
index 000000000000..db082a49be37
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-hyperware.dtsi
@@ -0,0 +1,1163 @@
+/*
+ * Copyright 2017-2018 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "fsl-imx8qm.dtsi"
+
+/ {
+	model = "Freescale i.MX8QM MEK";
+	compatible = "fsl,imx8qm-mek", "fsl,imx8qm";
+
+	chosen {
+		bootargs = "console=ttyLP0,115200 earlycon=lpuart32,0x5a060000,115200";
+		stdout-path = &lpuart0;
+	};
+
+	regulators {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		reg_12v_core: reg_12v_core {
+			compatible = "regulator-fixed";
+			// reg = <0>;
+			regulator-name = "core-12v-pwr";
+			regulator-min-microvolt = <12000000>;
+			regulator-max-microvolt = <12000000>;
+			regulator-always-on;
+		};
+
+		reg_5v_core: reg_5v_core {
+			compatible = "regulator-fixed";
+			// reg = <1>;
+			regulator-name = "core-5v-pwr";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			regulator-always-on;
+			vin-supply = <&reg_12v_core>;
+		};
+
+		reg_3v3_usbhub: reg_usbhub {
+			compatible = "regulator-fixed";
+			regulator-name = "usbhub_pwr";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-boot-on;
+			regulator-always-on;
+			gpio = <&gpio4 6 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			vin-supply = <&reg_5v_core>;
+		};
+
+		// reg_1v8_lvds0ch0_bl: reg_lvds0ch0_bl {
+		// 	compatible = "regulator-fixed";
+		// 	regulator-name = "lvds0ch0-bl-pwr";
+		// 	regulator-min-microvolt = <3300000>;
+		// 	regulator-max-microvolt = <3300000>;
+		// 	regulator-boot-on;
+		// 	regulator-always-on;
+		// 	gpio = <&gpio3 16 GPIO_ACTIVE_HIGH>;
+		// 	enable-active-high;
+		// 	vin-supply = <&reg_5v_core>;
+		// };
+
+		reg_vref_1v8: adc_vref_1v8 {
+			compatible = "regulator-fixed";
+			regulator-name = "vref_1v8";
+			regulator-min-microvolt = <1800000>;
+			regulator-max-microvolt = <1800000>;
+		};
+	};
+
+	sound-amix-sai {
+		compatible = "fsl,imx-audio-amix";
+		model = "amix-audio-sai";
+		dais = <&sai6>, <&sai7>;
+		amix-controller = <&amix>;
+	};
+
+	lvds0ch0_backlight: lvds0_backlight@0 {
+		compatible = "pwm-backlight";
+		pwms = <&lvds0_pwm 0 100000 0>;
+		enable-gpios = <&gpio3 15 GPIO_ACTIVE_HIGH>;
+
+		brightness-levels = < 0  1  2  3  4  5  6  7  8  9
+				     10 11 12 13 14 15 16 17 18 19
+				     20 21 22 23 24 25 26 27 28 29
+				     30 31 32 33 34 35 36 37 38 39
+				     40 41 42 43 44 45 46 47 48 49
+				     50 51 52 53 54 55 56 57 58 59
+				     60 61 62 63 64 65 66 67 68 69
+				     70 71 72 73 74 75 76 77 78 79
+				     80 81 82 83 84 85 86 87 88 89
+				     90 91 92 93 94 95 96 97 98 99
+				    100>;
+		default-brightness-level = <100>;
+	};
+
+	lvds1ch0_backlight: lvds1_backlight@0 {
+		compatible = "pwm-backlight";
+		pwms = <&lvds1_pwm 0 100000 0>;
+		enable-gpios = <&gpio4 23 GPIO_ACTIVE_HIGH>;
+
+		brightness-levels = < 0  1  2  3  4  5  6  7  8  9
+				     10 11 12 13 14 15 16 17 18 19
+				     20 21 22 23 24 25 26 27 28 29
+				     30 31 32 33 34 35 36 37 38 39
+				     40 41 42 43 44 45 46 47 48 49
+				     50 51 52 53 54 55 56 57 58 59
+				     60 61 62 63 64 65 66 67 68 69
+				     70 71 72 73 74 75 76 77 78 79
+				     80 81 82 83 84 85 86 87 88 89
+				     90 91 92 93 94 95 96 97 98 99
+				    100>;
+		default-brightness-level = <100>;
+	};
+
+	lvds0_channel0_panel {
+		compatible = "cpt,claa123fca5xg";
+
+		port {
+			panel_lvds0_ch0_in: endpoint {
+				remote-endpoint = <&lvds0_ch0_out>;
+			};
+		};
+	};
+
+	lvds0_channel1_panel {
+		compatible = "cpt,claa123fca5xg";
+
+		port {
+			panel_lvds0_ch1_in: endpoint {
+				remote-endpoint = <&lvds0_ch1_out>;
+			};
+		};
+	};
+
+	lvds1_channel0_panel {
+		compatible = "cpt,claa123fca5xg";
+
+		port {
+			panel_lvds1_ch0_in: endpoint {
+				remote-endpoint = <&lvds1_ch0_out>;
+			};
+		};
+	};
+
+	lvds1_channel1_panel {
+		compatible = "cpt,claa123fca5xg";
+
+		port {
+			panel_lvds1_ch1_in: endpoint {
+				remote-endpoint = <&lvds1_ch1_out>;
+			};
+		};
+	};
+
+};
+
+&acm {
+	status = "okay";
+};
+
+&amix {
+	status = "okay";
+};
+
+&iomuxc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_hog>;
+
+	imx8qm-mek {
+		pinctrl_hog: hoggrp {
+			fsl,pins = <
+				// SC_P_MCLK_OUT0_AUD_ACM_MCLK_OUT0	    0x0600004c
+				// SC_P_QSPI1A_DATA1_LSIO_GPIO4_IO25	0x0600004c
+				// SC_P_SCU_GPIO0_03_LSIO_GPIO0_IO31	0x0600004c
+				SC_P_USB_SS3_TC3_LSIO_GPIO4_IO06	    0x0600004c	/* HUB_RST */
+				SC_P_SAI1_TXFS_LSIO_GPIO3_IO17          0x0600004c	/* LVDS0_CH0_SER_RST */
+				SC_P_QSPI1A_DATA0_LSIO_GPIO4_IO26       0x0600004c	/* LVDS0_CH1_SER_RST */
+				SC_P_QSPI1A_DATA3_LSIO_GPIO4_IO23       0x0600004c  /* LVDS1_CH0_SER_RST */
+				SC_P_ENET1_RGMII_TXD1_LSIO_GPIO6_IO13   0x0600004c  /* LVDS1_CH1_SER_RST */
+				SC_P_LVDS0_GPIO01_LSIO_GPIO1_IO05       0xc6000021  /* LVDS0_CH0_TFT_TP_INT */
+				SC_P_QSPI1A_SCLK_LSIO_GPIO4_IO21        0xc6000021	/* LVDS0_CH0_TFT_TP_RST */
+				SC_P_LVDS1_GPIO01_LSIO_GPIO1_IO11       0xc6000021  /* LVDS1_CH0_TFT_TP_INT */
+				SC_P_QSPI1A_DATA1_LSIO_GPIO4_IO25       0xc6000021  /* LVDS1_CH0_TFT_TP_RST */
+			>;
+		};
+
+		pinctrl_adc0: adc0grp {
+			fsl,pins = <
+				SC_P_ADC_IN0_DMA_ADC0_IN0		0xc0000060
+			>;
+		};
+
+		pinctrl_cm41_i2c0: cm41i2c0grp {
+			fsl,pins = <
+				SC_P_M41_I2C0_SCL_M41_I2C0_SCL          0x0600004c
+				SC_P_M41_I2C0_SDA_M41_I2C0_SDA          0x0600004c
+			>;
+		};
+
+		pinctrl_esai0: esai0grp {
+			fsl,pins = <
+				SC_P_ESAI0_FSR_AUD_ESAI0_FSR            0xc6000040
+				SC_P_ESAI0_FST_AUD_ESAI0_FST            0xc6000040
+				SC_P_ESAI0_SCKR_AUD_ESAI0_SCKR          0xc6000040
+				SC_P_ESAI0_SCKT_AUD_ESAI0_SCKT          0xc6000040
+				SC_P_ESAI0_TX0_AUD_ESAI0_TX0            0xc6000040
+				SC_P_ESAI0_TX1_AUD_ESAI0_TX1            0xc6000040
+				SC_P_ESAI0_TX2_RX3_AUD_ESAI0_TX2_RX3    0xc6000040
+				SC_P_ESAI0_TX3_RX2_AUD_ESAI0_TX3_RX2    0xc6000040
+				SC_P_ESAI0_TX4_RX1_AUD_ESAI0_TX4_RX1    0xc6000040
+				SC_P_ESAI0_TX5_RX0_AUD_ESAI0_TX5_RX0    0xc6000040
+			>;
+		};
+
+		pinctrl_lpuart0: lpuart0grp {
+			fsl,pins = <
+				SC_P_UART0_RX_DMA_UART0_RX		0x06000020
+				SC_P_UART0_TX_DMA_UART0_TX		0x06000020
+			>;
+		};
+
+		pinctrl_lpuart1: lpuart1grp {
+			fsl,pins = <
+				SC_P_UART1_RX_DMA_UART1_RX		0x06000020
+				SC_P_UART1_TX_DMA_UART1_TX		0x06000020
+				SC_P_UART1_CTS_B_DMA_UART1_CTS_B	0x06000020
+				SC_P_UART1_RTS_B_DMA_UART1_RTS_B	0x06000020
+			>;
+		};
+
+		pinctrl_lpuart2: lpuart2grp {
+			fsl,pins = <
+				SC_P_UART0_RTS_B_DMA_UART2_RX		0x06000020
+				SC_P_UART0_CTS_B_DMA_UART2_TX		0x06000020
+			>;
+		};
+
+		pinctrl_lpuart3: lpuart3grp {
+			fsl,pins = <
+				SC_P_M41_GPIO0_00_DMA_UART3_RX		0x06000020
+				SC_P_M41_GPIO0_01_DMA_UART3_TX		0x06000020
+			>;
+		};
+
+		pinctrl_mlb: mlbgrp {
+			fsl,pins = <
+				SC_P_MLB_SIG_CONN_MLB_SIG               0x21
+				SC_P_MLB_CLK_CONN_MLB_CLK               0x21
+				SC_P_MLB_DATA_CONN_MLB_DATA             0x21
+			>;
+		};
+
+		pinctrl_i2c0: i2c0grp {
+			fsl,pins = <
+				SC_P_HDMI_TX0_TS_SCL_DMA_I2C0_SCL	0x06000021
+				SC_P_HDMI_TX0_TS_SDA_DMA_I2C0_SDA	0x06000021
+			>;
+		};
+
+		pinctrl_i2c1: i2c1grp {
+			fsl,pins = <
+				SC_P_GPT0_CLK_DMA_I2C1_SCL 0x0600004c
+				SC_P_GPT0_CAPTURE_DMA_I2C1_SDA 0x0600004c
+			>;
+		};
+
+		pinctrl_i2c4: i2c4grp {
+			fsl,pins = <
+				SC_P_ENET1_MDC_DMA_I2C4_SCL 0x0600004c
+				SC_P_ENET1_MDIO_DMA_I2C4_SDA 0x0600004c
+			>;
+		};
+
+		pinctrl_pciea: pcieagrp{
+			fsl,pins = <
+				SC_P_PCIE_CTRL0_CLKREQ_B_LSIO_GPIO4_IO27	0x06000021
+				SC_P_PCIE_CTRL0_WAKE_B_LSIO_GPIO4_IO28		0x04000021
+				SC_P_PCIE_CTRL0_PERST_B_LSIO_GPIO4_IO29		0x06000021
+				SC_P_USDHC2_RESET_B_LSIO_GPIO4_IO09		0x06000021
+			>;
+		};
+
+		pinctrl_sim0: sim0grp {
+			fsl,pins = <
+				SC_P_SIM0_CLK_DMA_SIM0_CLK		0x21
+				SC_P_SIM0_IO_DMA_SIM0_IO		0x21
+				SC_P_SIM0_PD_DMA_SIM0_PD		0x21
+				SC_P_SIM0_POWER_EN_DMA_SIM0_POWER_EN	0x21
+				SC_P_SIM0_RST_DMA_SIM0_RST		0x21
+			>;
+		};
+
+		pinctrl_usbotg1: usbotg1 {
+			fsl,pins = <
+				SC_P_USB_SS3_TC0_CONN_USB_OTG1_PWR		0x00000021
+			>;
+		};
+
+		pinctrl_usdhc1: usdhc1grp {
+			fsl,pins = <
+				SC_P_EMMC0_CLK_CONN_EMMC0_CLK		0x06000041
+				SC_P_EMMC0_CMD_CONN_EMMC0_CMD		0x00000021
+				SC_P_EMMC0_DATA0_CONN_EMMC0_DATA0	0x00000021
+				SC_P_EMMC0_DATA1_CONN_EMMC0_DATA1	0x00000021
+				SC_P_EMMC0_DATA2_CONN_EMMC0_DATA2	0x00000021
+				SC_P_EMMC0_DATA3_CONN_EMMC0_DATA3	0x00000021
+				SC_P_EMMC0_DATA4_CONN_EMMC0_DATA4	0x00000021
+				SC_P_EMMC0_DATA5_CONN_EMMC0_DATA5	0x00000021
+				SC_P_EMMC0_DATA6_CONN_EMMC0_DATA6	0x00000021
+				SC_P_EMMC0_DATA7_CONN_EMMC0_DATA7	0x00000021
+				SC_P_EMMC0_STROBE_CONN_EMMC0_STROBE	0x00000041
+				SC_P_EMMC0_RESET_B_CONN_EMMC0_RESET_B	0x00000021
+			>;
+		};
+
+		pinctrl_usdhc1_100mhz: usdhc1grp100mhz {
+			fsl,pins = <
+				SC_P_EMMC0_CLK_CONN_EMMC0_CLK		0x06000040
+				SC_P_EMMC0_CMD_CONN_EMMC0_CMD		0x00000020
+				SC_P_EMMC0_DATA0_CONN_EMMC0_DATA0	0x00000020
+				SC_P_EMMC0_DATA1_CONN_EMMC0_DATA1	0x00000020
+				SC_P_EMMC0_DATA2_CONN_EMMC0_DATA2	0x00000020
+				SC_P_EMMC0_DATA3_CONN_EMMC0_DATA3	0x00000020
+				SC_P_EMMC0_DATA4_CONN_EMMC0_DATA4	0x00000020
+				SC_P_EMMC0_DATA5_CONN_EMMC0_DATA5	0x00000020
+				SC_P_EMMC0_DATA6_CONN_EMMC0_DATA6	0x00000020
+				SC_P_EMMC0_DATA7_CONN_EMMC0_DATA7	0x00000020
+				SC_P_EMMC0_STROBE_CONN_EMMC0_STROBE	0x00000040
+				SC_P_EMMC0_RESET_B_CONN_EMMC0_RESET_B	0x00000020
+			>;
+		};
+
+		pinctrl_usdhc1_200mhz: usdhc1grp200mhz {
+			fsl,pins = <
+				SC_P_EMMC0_CLK_CONN_EMMC0_CLK		0x06000040
+				SC_P_EMMC0_CMD_CONN_EMMC0_CMD		0x00000020
+				SC_P_EMMC0_DATA0_CONN_EMMC0_DATA0	0x00000020
+				SC_P_EMMC0_DATA1_CONN_EMMC0_DATA1	0x00000020
+				SC_P_EMMC0_DATA2_CONN_EMMC0_DATA2	0x00000020
+				SC_P_EMMC0_DATA3_CONN_EMMC0_DATA3	0x00000020
+				SC_P_EMMC0_DATA4_CONN_EMMC0_DATA4	0x00000020
+				SC_P_EMMC0_DATA5_CONN_EMMC0_DATA5	0x00000020
+				SC_P_EMMC0_DATA6_CONN_EMMC0_DATA6	0x00000020
+				SC_P_EMMC0_DATA7_CONN_EMMC0_DATA7	0x00000020
+				SC_P_EMMC0_STROBE_CONN_EMMC0_STROBE	0x00000040
+				SC_P_EMMC0_RESET_B_CONN_EMMC0_RESET_B	0x00000020
+			>;
+		};
+
+		pinctrl_lvds0_lpi2c0: lvds0lpi2c0grp {
+			fsl,pins = <
+				SC_P_LVDS0_I2C0_SCL_LVDS0_I2C0_SCL	0xc600004c
+				SC_P_LVDS0_I2C0_SDA_LVDS0_I2C0_SDA	0xc600004c
+			>;
+		};
+
+		pinctrl_lvds0_lpi2c1: lvds0lpi2c1grp {
+			fsl,pins = <
+				SC_P_LVDS0_I2C1_SCL_LVDS0_I2C1_SCL	0xc600004c
+				SC_P_LVDS0_I2C1_SDA_LVDS0_I2C1_SDA	0xc600004c
+			>;
+		};
+
+		pinctrl_lvds1_lpi2c0: lvds1lpi2c0grp {
+			fsl,pins = <
+				SC_P_LVDS1_I2C0_SCL_LVDS1_I2C0_SCL	0xc600004c
+				SC_P_LVDS1_I2C0_SDA_LVDS1_I2C0_SDA	0xc600004c
+			>;
+		};
+
+		pinctrl_lvds1_lpi2c1: lvds1lpi2c1grp {
+			fsl,pins = <
+				SC_P_LVDS1_I2C1_SCL_LVDS1_I2C1_SCL	0xc600004c
+				SC_P_LVDS1_I2C1_SDA_LVDS1_I2C1_SDA	0xc600004c
+			>;
+		};
+
+		pinctrl_lvds0_pwm0: lvds0pwm0grp {
+			fsl,pins = <
+				SC_P_SAI1_TXC_LSIO_GPIO3_IO15       0x0600004c	/* LVDS0_CH0_TFT_BL_EN */
+				SC_P_LVDS0_GPIO00_LVDS0_PWM0_OUT	0x00000020	/* LVDS0_CH0_TFT_BL_PWM */
+			>;
+		};
+
+		pinctrl_lvds1_pwm0: lvds1pwm0grp {
+			fsl,pins = <
+				SC_P_QSPI1A_DATA2_LSIO_GPIO4_IO24   0x0600004c  /* LVDS1_CH0_TFT_BL_EN */
+				SC_P_LVDS1_GPIO00_LVDS1_PWM0_OUT	0x00000020  /* LVDS1_CH0_TFT_BL_PWM */
+			>;
+		};
+
+		pinctrl_mipi0_lpi2c0: mipi0_lpi2c0grp {
+			fsl,pins = <
+				SC_P_MIPI_DSI0_I2C0_SCL_MIPI_DSI0_I2C0_SCL	0xc600004c
+				SC_P_MIPI_DSI0_I2C0_SDA_MIPI_DSI0_I2C0_SDA	0xc600004c
+				// SC_P_MIPI_DSI0_GPIO0_01_LSIO_GPIO1_IO19		0x00000020
+			>;
+		};
+
+		pinctrl_mipi1_lpi2c0: mipi1_lpi2c0grp {
+			fsl,pins = <
+				SC_P_MIPI_DSI1_I2C0_SCL_MIPI_DSI1_I2C0_SCL	0xc600004c
+				SC_P_MIPI_DSI1_I2C0_SDA_MIPI_DSI1_I2C0_SDA	0xc600004c
+				// SC_P_MIPI_DSI1_GPIO0_01_LSIO_GPIO1_IO23		0x00000020
+			>;
+		};
+	};
+};
+
+&adc0 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_adc0>;
+	vref-supply = <&reg_vref_1v8>;
+	status = "okay";
+};
+
+&asrc0 {
+	fsl,asrc-rate  = <48000>;
+	status = "okay";
+};
+
+&esai0 {
+	compatible = "fsl,imx8qm-esai";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esai0>;
+	assigned-clocks = <&clk IMX8QM_ACM_ESAI0_MCLK_SEL>,
+			<&clk IMX8QM_AUD_PLL0_DIV>,
+			<&clk IMX8QM_AUD_ACM_AUD_PLL_CLK0_DIV>,
+			<&clk IMX8QM_AUD_ACM_AUD_REC_CLK0_DIV>,
+			<&clk IMX8QM_AUD_ESAI_0_EXTAL_IPG>;
+	assigned-clock-parents = <&clk IMX8QM_AUD_ACM_AUD_PLL_CLK0_CLK>;
+	assigned-clock-rates = <0>, <786432000>, <49152000>, <12288000>, <49152000>;
+	fsl,txm-rxs;
+	status = "okay";
+};
+
+&emvsim0 {
+	pinctrl-names = "default", "sleep";
+	pinctrl-0 = <&pinctrl_sim0>;
+	pinctrl-1 = <&pinctrl_sim0>;
+	status = "okay";
+};
+
+&usbotg1 {
+	// pinctrl-names = "default";
+	// pinctrl-0 = <&pinctrl_usbotg1>;
+	// srp-disable;
+	// hnp-disable;
+	// adp-disable;
+	// power-polarity-active-high;
+	// disable-over-current;
+	dr_mode = "peripheral";
+	status = "okay";
+};
+
+&usbotg3 {
+	dr_mode = "host";
+	// extcon = <&typec_ptn5110>;
+	status = "okay";
+};
+
+&usdhc1 {
+	pinctrl-names = "default", "state_100mhz", "state_200mhz";
+	pinctrl-0 = <&pinctrl_usdhc1>;
+	pinctrl-1 = <&pinctrl_usdhc1_100mhz>;
+	pinctrl-2 = <&pinctrl_usdhc1_200mhz>;
+	bus-width = <8>;
+	non-removable;
+	status = "okay";
+};
+
+&i2c0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c0>;
+	status = "okay";
+};
+
+&i2c1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c1>;
+	status = "okay";
+};
+
+&i2c4 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c4>;
+	status = "okay";
+
+	tca9539_a: gpio@74 {
+		compatible = "ti,tca9539";
+		reg = <0x74>;
+		gpio-controller;
+		#gpio-cells = <2>;
+	};
+
+	tca9539_b: gpio@75 {
+		compatible = "ti,tca9539";
+		reg = <0x75>;
+		gpio-controller;
+		#gpio-cells = <2>;
+	};
+};
+
+&i2c0_cm41 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_cm41_i2c0>;
+	status = "okay";
+};
+
+&pd_dma_lpuart0 {
+	debug_console;
+};
+
+&lpuart0 { /* console */
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lpuart0>;
+	status = "okay";
+};
+
+&lpuart1 { /* BT */
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lpuart1>;
+	// resets = <&modem_reset>;
+	status = "okay";
+};
+
+&lpuart2 { /* Dbg console */
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lpuart2>;
+	status = "disabled";
+};
+
+&lpuart3 { /* MKbus */
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lpuart3>;
+	status = "okay";
+};
+
+&gpu_3d0 {
+        status = "okay";
+};
+
+&gpu_3d1 {
+        status = "okay";
+};
+
+&imx8_gpu_ss {
+        status = "okay";
+};
+
+&pixel_combiner1 {
+	status = "okay";
+};
+
+&prg1 {
+	status = "okay";
+};
+
+&prg2 {
+	status = "okay";
+};
+
+&prg3 {
+	status = "okay";
+};
+
+&prg4 {
+	status = "okay";
+};
+
+&prg5 {
+	status = "okay";
+};
+
+&prg6 {
+	status = "okay";
+};
+
+&prg7 {
+	status = "okay";
+};
+
+&prg8 {
+	status = "okay";
+};
+
+&prg9 {
+	status = "okay";
+};
+
+&dpr1_channel1 {
+	status = "okay";
+};
+
+&dpr1_channel2 {
+	status = "okay";
+};
+
+&dpr1_channel3 {
+	status = "okay";
+};
+
+&dpr2_channel1 {
+	status = "okay";
+};
+
+&dpr2_channel2 {
+	status = "okay";
+};
+
+&dpr2_channel3 {
+	status = "okay";
+};
+
+&dpu1 {
+	status = "okay";
+};
+
+&pixel_combiner2 {
+	status = "okay";
+};
+
+&prg10 {
+	status = "okay";
+};
+
+&prg11 {
+	status = "okay";
+};
+
+&prg12 {
+	status = "okay";
+};
+
+&prg13 {
+	status = "okay";
+};
+
+&prg14 {
+	status = "okay";
+};
+
+&prg15 {
+	status = "okay";
+};
+
+&prg16 {
+	status = "okay";
+};
+
+&prg17 {
+	status = "okay";
+};
+
+&prg18 {
+	status = "okay";
+};
+
+&dpr3_channel1 {
+	status = "okay";
+};
+
+&dpr3_channel2 {
+	status = "okay";
+};
+
+&dpr3_channel3 {
+	status = "okay";
+};
+
+&dpr4_channel1 {
+	status = "okay";
+};
+
+&dpr4_channel2 {
+	status = "okay";
+};
+
+&dpr4_channel3 {
+	status = "okay";
+};
+
+&dpu2 {
+	status = "okay";
+};
+
+&pciea{
+	ext_osc = <1>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_pciea>;
+	disable-gpio = <&gpio4 9 GPIO_ACTIVE_LOW>;
+	reset-gpio = <&gpio4 29 GPIO_ACTIVE_LOW>;
+	clkreq-gpio = <&gpio4 27 GPIO_ACTIVE_LOW>;
+	// epdev_on-supply = <&epdev_on>;
+	status = "disabled";
+};
+
+&pd_cm40_intmux {
+	early_power_on;
+};
+
+&intmux_cm40 {
+	status = "okay";
+};
+
+&rpmsg{
+	/*
+	 * 64K for one rpmsg instance:
+	 */
+	vdev-nums = <2>;
+	reg = <0x0 0x90000000 0x0 0x20000>;
+	status = "okay";
+};
+
+&pd_cm41_intmux {
+	early_power_on;
+};
+
+&intmux_cm41 {
+	status = "okay";
+};
+
+&rpmsg1{
+	/*
+	 * 64K for one rpmsg instance:
+	 */
+	vdev-nums = <2>;
+	reg = <0x0 0x90100000 0x0 0x20000>;
+	status = "okay";
+};
+
+&mipi_csi_0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	virtual-channel;
+	status = "disabled";
+};
+
+&mipi_csi_1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	virtual-channel;
+	status = "disabled";
+};
+
+&mlb {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_mlb>;
+	status = "okay";
+};
+
+&gpio1 {
+	status = "okay";
+};
+
+&gpio3 {
+	status = "okay";
+};
+
+&gpio4 {
+	status = "okay";
+};
+
+&gpio6 {
+	status = "okay";
+};
+
+&i2c0_mipi_csi0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	status = "disabled";
+};
+
+&i2c0_mipi_csi1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	status = "disabled";
+};
+
+&isi_0 {
+	status = "okay";
+};
+
+&isi_1 {
+	status = "okay";
+};
+
+&isi_2 {
+	status = "okay";
+};
+
+&isi_3 {
+	status = "okay";
+};
+
+&sata {
+	pinctrl-0 = <&pinctrl_pciea>;
+	clkreq-gpio = <&gpio4 27 GPIO_ACTIVE_LOW>;
+	status = "okay";
+};
+
+&ldb1_phy {
+	status = "okay";
+};
+
+&ldb1 {
+	status = "okay";
+
+	lvds-channel@0 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "okay";
+
+		port@1 {
+			reg = <1>;
+
+			lvds0_ch0_out: endpoint {
+				remote-endpoint = <&panel_lvds0_ch0_in>;
+			};
+		};
+	};
+
+	lvds-channel@1 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "disabled";
+
+		port@1 {
+			reg = <1>;
+
+			lvds0_ch1_out: endpoint {
+				remote-endpoint = <&panel_lvds0_ch1_in>;
+			};
+		};
+	};
+};
+
+&i2c0_lvds0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lvds0_lpi2c0>;
+	clock-frequency = <100000>;
+	status = "okay";
+
+	lvds0ch0_ser: ds90ub947@0c {
+		compatible = "ti,ds90ub94x";
+		reg = <0x0c>;
+		/* GPIO 38, high-to-low edge triggered */
+		/* interrupts = <6 2>; */
+		/* interrupt-parent = <&gpio3>; */
+		reset-gpios = <&gpio3 17 GPIO_ACTIVE_HIGH>;
+		status = "okay";
+	};
+
+	lvds0ch0_tp: cyttsp6@24 {
+		compatible = "cy,cyttsp6_i2c_adapter";
+		reg = <0x24>;
+		status = "okay";
+		/* GPIO 38, high-to-low edge triggered */
+		/* interrupts = <6 2>; */
+		/* interrupt-parent = <&gpio3>; */
+		interrupt-parent = <&gpio1>;
+		interrupts = <5 IRQ_TYPE_EDGE_FALLING>;
+
+		cy,core {
+			cy,irq_gpio = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+			cy,rst_gpio = <&gpio4 21 GPIO_ACTIVE_HIGH>;
+
+			/* Enable cy,max_xfer_len to limit max I2C/SPI transfer length */
+			cy,max_xfer_len = <256>;
+
+			/* CY_CORE_FLAG_WAKE_ON_GESTURE */
+			/* cy,flags = <1>; */ 
+			/* CY_CORE_EWG_TAP_TAP | CY_CORE_EWG_TWO_FINGER_SLIDE */
+			/* cy,easy_wakeup_gesture = <3>; */
+			cy,btn_keys = <172 /* KEY_HOMEPAGE */
+					   /* previously was KEY_HOME, new Android versions use KEY_HOMEPAGE */
+				       139 /* KEY_MENU */
+				       158 /* KEY_BACK */
+				       217 /* KEY_SEARCH */
+				       114 /* KEY_VOLUMEDOWN */
+				       115 /* KEY_VOLUMEUP */
+				       212 /* KEY_CAMERA */
+				       116>; /* KEY_POWER */
+			cy,btn_keys-tag = <0>;
+
+			cy,mt {
+				cy,inp_dev_name = "cyttsp6_mt0";
+				/* CY_MT_FLAG_FLIP | CY_MT_FLAG_INV_X | CY_MT_FLAG_INV_Y */
+			       /* cy,flags = <0x38>;*/
+				cy,abs =
+					/* ABS_MT_POSITION_X, CY_ABS_MIN_X, CY_ABS_MAX_X, 0, 0 */
+					<0x35 0 1526 0 0
+					/* ABS_MT_POSITION_Y, CY_ABS_MIN_Y, CY_ABS_MAX_Y, 0, 0 */
+					0x36 0 768 0 0
+					/* ABS_MT_PRESSURE, CY_ABS_MIN_P, CY_ABS_MAX_P, 0, 0 */
+					0x3a 0 255 0 0
+					/* CY_IGNORE_VALUE, CY_ABS_MIN_W, CY_ABS_MAX_W, 0, 0 */
+					0xffff 0 255 0 0
+					/* ABS_MT_TRACKING_ID, CY_ABS_MIN_T, CY_ABS_MAX_T, 0, 0 */
+					0x39 0 15 0 0
+					/* ABS_MT_TOUCH_MAJOR, 0, 255, 0, 0 */
+					0x30 0 255 0 0
+					/* ABS_MT_TOUCH_MINOR, 0, 255, 0, 0 */
+					0x31 0 255 0 0
+					/* ABS_MT_ORIENTATION, -127, 127, 0, 0 */
+					0x34 0xffffff81 127 0 0
+					/* ABS_MT_TOOL_TYPE, 0, MT_TOOL_MAX, 0, 0 */
+					0x37 0 1 0 0
+					/* ABS_DISTANCE, 0, 255, 0, 0 */
+					0x19 0 255 0 0>;
+
+				cy,vkeys_x = <1920>;
+				cy,vkeys_y = <720>;
+
+				cy,virtual_keys = /* KeyCode CenterX CenterY Width Height */
+					/* KEY_BACK */
+					<158 1360 90 160 180
+					/* KEY_MENU */
+					139 1360 270 160 180
+					/* KEY_HOMEPAGE */
+					172 1360 450 160 180
+					/* KEY SEARCH */
+					217 1360 630 160 180>;
+			};
+
+			cy,btn {
+				cy,inp_dev_name = "cyttsp6_btn";
+			};
+
+			cy,proximity {
+				cy,inp_dev_name = "cyttsp6_proximity";
+				cy,abs =
+					/* ABS_DISTANCE, CY_PROXIMITY_MIN_VAL, CY_PROXIMITY_MAX_VAL, 0, 0 */
+					<0x19 0 1 0 0>;
+			};
+		};
+	};
+};
+
+// &i2c1_lvds0 {
+// 	#address-cells = <1>;
+// 	#size-cells = <0>;
+// 	pinctrl-names = "default";
+// 	pinctrl-0 = <&pinctrl_lvds0_lpi2c1>;
+// 	clock-frequency = <100000>;
+// 	status = "okay";
+
+// 	lvds0_ch1_ser: ds90ub947@0c {
+// 		compatible = "ti,ds90ub94x";
+// 		reg = <0x0c>;
+// 		/* GPIO 38, high-to-low edge triggered */
+// 		/* interrupts = <6 2>; */
+// 		/* interrupt-parent = <&gpio3>; */
+// 		reset-gpios = <&gpio4 26 GPIO_ACTIVE_HIGH>;
+// 		status = "okay";
+// 	};
+// };
+
+&ldb2_phy {
+	status = "okay";
+};
+
+&ldb2 {
+	status = "okay";
+
+	lvds-channel@0 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "okay";
+
+		port@1 {
+			reg = <1>;
+
+			lvds1_ch0_out: endpoint {
+				remote-endpoint = <&panel_lvds1_ch0_in>;
+			};
+		};
+	};
+
+	lvds-channel@1 {
+		fsl,data-mapping = "spwg";
+		fsl,data-width = <24>;
+		status = "disabled";
+
+		port@1 {
+			reg = <1>;
+
+			lvds1_ch1_out: endpoint {
+				remote-endpoint = <&panel_lvds1_ch1_in>;
+			};
+		};
+	};
+};
+
+&i2c0_lvds1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lvds1_lpi2c0>;
+	clock-frequency = <100000>;
+	status = "okay";
+
+	lvds1_ch0_ser: ds90ub947@0c {
+		compatible = "ti,ds90ub94x";
+		reg = <0x0c>;
+		/* GPIO 38, high-to-low edge triggered */
+		/* interrupts = <6 2>; */
+		/* interrupt-parent = <&gpio3>; */
+		reset-gpios = <&gpio4 23 GPIO_ACTIVE_HIGH>;
+		status = "okay";
+	};
+};
+
+// &i2c1_lvds1 {
+// 	#address-cells = <1>;
+// 	#size-cells = <0>;
+// 	pinctrl-names = "default";
+// 	pinctrl-0 = <&pinctrl_lvds1_lpi2c1>;
+// 	clock-frequency = <100000>;
+// 	status = "okay";
+
+// 	lvds1_ch1_ser: ds90ub947@0c {
+// 		compatible = "ti,ds90ub94x";
+// 		reg = <0x0c>;
+// 		/* GPIO 38, high-to-low edge triggered */
+// 		/* interrupts = <6 2>; */
+// 		/* interrupt-parent = <&gpio3>; */
+// 		reset-gpios = <&gpio6 13 GPIO_ACTIVE_HIGH>;
+// 		status = "okay";
+// 	};
+// };
+
+&i2c0_mipi_dsi0 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_mipi0_lpi2c0>;
+	clock-frequency = <100000>;
+	status = "disabled";
+};
+
+&mipi_dsi_phy1 {
+	status = "disabled";
+};
+
+&mipi_dsi1 {
+	pwr-delay = <10>;
+	status = "disabled";
+};
+
+&mipi_dsi_bridge1 {
+	status = "disabled";
+};
+
+&i2c0_mipi_dsi1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_mipi1_lpi2c0>;
+	clock-frequency = <100000>;
+	status = "disabled";
+};
+
+&mipi_dsi_phy2 {
+	status = "disabled";
+};
+
+&mipi_dsi2 {
+	pwr-delay = <10>;
+	status = "disabled";
+};
+
+&mipi_dsi_bridge2 {
+	status = "disabled";
+};
+
+&lvds0_pwm {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lvds0_pwm0>;
+	status = "okay";
+};
+
+&lvds1_pwm {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_lvds1_pwm0>;
+	status = "okay";
+};
+
+&tsens {
+	tsens-num = <6>;
+};
+
+&thermal_zones {
+	pmic-thermal0 {
+		polling-delay-passive = <250>;
+		polling-delay = <2000>;
+		thermal-sensors = <&tsens 5>;
+		trips {
+			pmic_alert0: trip0 {
+				temperature = <110000>;
+				hysteresis = <2000>;
+				type = "passive";
+			};
+			pmic_crit0: trip1 {
+				temperature = <125000>;
+				hysteresis = <2000>;
+				type = "critical";
+			};
+		};
+		cooling-maps {
+			map0 {
+				trip = <&pmic_alert0>;
+				cooling-device =
+				<&A53_0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
+			};
+			map1 {
+				trip = <&pmic_alert0>;
+				cooling-device =
+				<&A72_0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
+			};
+		};
+	};
+};
+
+&vpu_decoder {
+	core_type = <2>;
+	status = "okay";
+};
+
+&vpu_encoder {
+	core_type = <2>;
+	status = "okay";
+};
+
+
-- 
2.21.0

